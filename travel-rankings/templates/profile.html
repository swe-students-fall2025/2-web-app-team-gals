{% extends "base.html" %}
{% block title %}Profile{% endblock %}

{% block content %}
<div class="profile-header">
  <h1>Welcome, {{ name }}!</h1>
  <div class="profile-links">
    <a href="{{ url_for('edit_profile') }}">Edit Profile</a> |
    <a href="{{ url_for('logout') }}">Logout</a>
  </div>
</div>

<h3 class="exp-header" style="text-align:center; margin-top: 40px;">Your Latest Experiences</h3>

{% if experiences %}
<div class="experience-grid">
  {% for exp in experiences %}
  <div class="experience-card">
    {% if exp.picture %}
    <img src="{{ url_for('static', filename='uploads/' + exp.picture) }}" alt="{{ exp.title }}">
    {% endif %}

    <div class="experience-info">
      <h3>{{ exp.title }}</h3>
      <p><strong>Category:</strong> {{ exp.category or "—" }}</p>
      <p><strong>Notes:</strong> {{ exp.notes or "No notes yet." }}</p>
      <p><strong>Rating:</strong> {{ exp.rating }}/10</p>
      <p class="date">{{ exp.created_at.strftime('%b %d, %Y') }}</p>

      <div class="exp-actions">
        <a href="{{ url_for('edit_experience', id=exp['_id'], next='profile') }}">Edit</a>
        <a href="{{ url_for('delete_experience', id=exp._id, next='profile') }}"
           onclick="return confirm('Are you sure you want to delete this experience?');">
          Delete
        </a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<p class="no-exp">
  You haven’t added any experiences yet.<br>
  <a href="{{ url_for('add_experience') }}" class="add-exp-link">Add your first one!</a>
</p>
{% endif %}
{% endblock %}
